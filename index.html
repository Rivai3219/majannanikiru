<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>éº»é›€ä½•åˆ‡ã‚‹å•é¡Œ</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
            font-size: 2.5em;
        }

        .problem-section {
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 5px solid #007bff;
        }

        .hand {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 8px;
            margin: 30px 0;
            padding: 20px;
            background: rgba(0,0,0,0.05);
            border-radius: 15px;
        }

        .tile {
            width: 80px;
            height: 100px;
            background: linear-gradient(145deg, #f8f8f8, #e0e0e0);
            border: 3px solid #2c2c2c;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            cursor: pointer;
            transition: all 0.3s ease;
            user-select: none;
            position: relative;
            box-shadow: 
                inset 2px 2px 4px rgba(255,255,255,0.8),
                inset -2px -2px 4px rgba(0,0,0,0.1),
                2px 2px 8px rgba(0,0,0,0.2);
        }

        .tile:hover {
            transform: translateY(-8px);
            box-shadow: 
                inset 2px 2px 4px rgba(255,255,255,0.9),
                inset -2px -2px 4px rgba(0,0,0,0.15),
                0 12px 25px rgba(0,0,0,0.3);
        }

        .tile.selected {
            background: linear-gradient(145deg, #ffcdd2, #f8bbd9);
            transform: translateY(-12px);
            box-shadow: 
                inset 2px 2px 4px rgba(255,255,255,0.9),
                inset -2px -2px 4px rgba(0,0,0,0.2),
                0 15px 30px rgba(255,107,107,0.5);
        }

        /* è¬å­ Unicodeæ–‡å­— */
        .man.tile-1m::after { content: "ğŸ€‡"; }
        .man.tile-2m::after { content: "ğŸ€ˆ"; }
        .man.tile-3m::after { content: "ğŸ€‰"; }
        .man.tile-4m::after { content: "ğŸ€Š"; }
        .man.tile-5m::after { content: "ğŸ€‹"; }
        .man.tile-6m::after { content: "ğŸ€Œ"; }
        .man.tile-7m::after { content: "ğŸ€"; }
        .man.tile-8m::after { content: "ğŸ€"; }
        .man.tile-9m::after { content: "ğŸ€"; }

        /* ç­’å­ Unicodeæ–‡å­— */
        .pin.tile-1p::after { content: "ğŸ€™"; }
        .pin.tile-2p::after { content: "ğŸ€š"; }
        .pin.tile-3p::after { content: "ğŸ€›"; }
        .pin.tile-4p::after { content: "ğŸ€œ"; }
        .pin.tile-5p::after { content: "ğŸ€"; }
        .pin.tile-6p::after { content: "ğŸ€"; }
        .pin.tile-7p::after { content: "ğŸ€Ÿ"; }
        .pin.tile-8p::after { content: "ğŸ€ "; }
        .pin.tile-9p::after { content: "ğŸ€¡"; }

        /* ç´¢å­ Unicodeæ–‡å­— */
        .sou.tile-1s::after { content: "ğŸ€"; }
        .sou.tile-2s::after { content: "ğŸ€‘"; }
        .sou.tile-3s::after { content: "ğŸ€’"; }
        .sou.tile-4s::after { content: "ğŸ€“"; }
        .sou.tile-5s::after { content: "ğŸ€”"; }
        .sou.tile-6s::after { content: "ğŸ€•"; }
        .sou.tile-7s::after { content: "ğŸ€–"; }
        .sou.tile-8s::after { content: "ğŸ€—"; }
        .sou.tile-9s::after { content: "ğŸ€˜"; }

        /* å­—ç‰Œ Unicodeæ–‡å­— */
        .honor.tile-æ±::after { content: "ğŸ€€"; }
        .honor.tile-å—::after { content: "ğŸ€"; }
        .honor.tile-è¥¿::after { content: "ğŸ€‚"; }
        .honor.tile-åŒ—::after { content: "ğŸ€ƒ"; }
        .honor.tile-ç™½::after { content: "ğŸ€†"; }
        .honor.tile-ç™¼::after { content: "ğŸ€…"; }
        .honor.tile-ä¸­::after { content: "ğŸ€„"; }

        .problem-info {
            background: #e8f5e8;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }

        .answer-section {
            margin-top: 20px;
            padding: 20px;
            background: #fff3e0;
            border-radius: 10px;
            display: none;
        }

        .answer-section.show {
            display: block;
        }

        .button {
            background: #007bff;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
            transition: all 0.3s ease;
        }

        .button:hover {
            background: #0056b3;
            transform: translateY(-2px);
        }

        .next-button {
            background: #28a745;
        }

        .next-button:hover {
            background: #1e7e34;
        }

        .score {
            text-align: center;
            font-size: 24px;
            color: #333;
            margin: 20px 0;
        }

        .result-display {
            text-align: center;
            font-size: 60px;
            margin: 20px 0;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .correct-mark {
            color: #e53e3e;
            font-weight: bold;
            animation: bounceIn 0.6s ease;
        }

        .incorrect-mark {
            color: #3182ce;
            font-weight: bold;
            animation: bounceIn 0.6s ease;
        }

        @keyframes bounceIn {
            0% { transform: scale(0); opacity: 0; }
            50% { transform: scale(1.2); opacity: 1; }
            100% { transform: scale(1); opacity: 1; }
        }

        .title-screen {
            text-align: center;
            padding: 50px 20px;
        }

        .title-illustration {
            font-size: 120px;
            margin-bottom: 20px;
            animation: bounce 2s ease-in-out infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-15px); }
            60% { transform: translateY(-7px); }
        }

        .title-screen h1 {
            font-size: 3.5em;
            margin-bottom: 30px;
            background: linear-gradient(45deg, #667eea, #764ba2, #667eea);
            background-size: 300% 300%;
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradientMove 3s ease-in-out infinite;
        }

        @keyframes gradientMove {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .title-description {
            font-size: 1.2em;
            color: #666;
            margin-bottom: 40px;
            line-height: 1.6;
        }

        .start-button {
            background: linear-gradient(45deg, #28a745, #20c997);
            color: white;
            border: none;
            padding: 20px 40px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 24px;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 8px 20px rgba(40, 167, 69, 0.3);
        }

        .start-button:hover {
            background: linear-gradient(45deg, #218838, #1ea085);
            transform: translateY(-3px);
            box-shadow: 0 12px 30px rgba(40, 167, 69, 0.4);
        }

        .game-screen {
            display: none;
        }

        .result-screen {
            display: none;
            text-align: center;
            padding: 50px 20px;
        }

        .result-screen h1 {
            font-size: 3em;
            margin-bottom: 30px;
            color: #333;
        }

        .final-score {
            font-size: 4em;
            font-weight: bold;
            margin: 30px 0;
            background: linear-gradient(45deg, #ff6b6b, #feca57, #ff6b6b);
            background-size: 300% 300%;
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradientMove 2s ease-in-out infinite;
        }

        .result-message {
            font-size: 1.5em;
            color: #666;
            margin: 30px 0;
            line-height: 1.6;
        }

        .result-emoji {
            font-size: 100px;
            margin: 20px 0;
            animation: bounce 1.5s ease-in-out infinite;
        }

        .restart-button {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 18px;
            margin: 10px;
            transition: all 0.3s ease;
        }

        .restart-button:hover {
            background: linear-gradient(45deg, #5a67d8, #6b46c1);
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="title-screen" id="title-screen">
            <div class="title-illustration">ğŸ±ğŸ€„ğŸ¯</div>
            <h1>éº»é›€ä½•åˆ‡ã‚‹å•é¡Œ</h1>
            <div class="title-description">
                <p>éº»é›€ã®ä½•åˆ‡ã‚‹å•é¡Œã«æŒ‘æˆ¦ã—ã¾ã—ã‚‡ã†ï¼</p>
                <p>æ‰‹ç‰Œã‹ã‚‰æœ€é©ãªç‰Œã‚’é¸ã‚“ã§æ¨ã¦ã¦ãã ã•ã„ã€‚</p>
                <p>å…¨9å•ã®å•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚</p>
            </div>
            <button class="start-button" onclick="startGame()">ã‚²ãƒ¼ãƒ é–‹å§‹</button>
        </div>

        <div class="result-screen" id="result-screen">
            <h1>ãŠç–²ã‚Œæ§˜ã§ã—ãŸï¼</h1>
            <div class="result-emoji" id="result-emoji">ğŸ‰</div>
            <div class="final-score" id="final-score">0 / 9</div>
            <div class="result-message" id="result-message">ç´ æ™´ã‚‰ã—ã„çµæœã§ã™ï¼</div>
            <div>
                <button class="restart-button" onclick="restartGame()">ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦</button>
                <button class="restart-button" onclick="backToTitle()">ã‚¿ã‚¤ãƒˆãƒ«ã«æˆ»ã‚‹</button>
            </div>
        </div>

        <div class="game-screen" id="game-screen">
            <h1>éº»é›€ä½•åˆ‡ã‚‹å•é¡Œ</h1>
            <div class="result-display" id="result-display"></div>
            
            <div id="problem-container">
                <div class="problem-section">
                    <h3 id="problem-title">å•é¡Œ 1</h3>
                    <div class="problem-info">
                        <p id="problem-description">ä»¥ä¸‹ã®æ‰‹ç‰Œã‹ã‚‰ä½•ã‚’åˆ‡ã‚Šã¾ã™ã‹ï¼Ÿ</p>
                        <p id="problem-context"></p>
                    </div>
                    
                    <div class="hand" id="hand">
                    </div>
                    
                    <div>
                        <button class="button" onclick="showAnswer()">ç­”ãˆã‚’è¦‹ã‚‹</button>
                        <button class="button next-button" onclick="nextProblem()">æ¬¡ã®å•é¡Œ</button>
                    </div>
                    
                    <div class="answer-section" id="answer">
                        <h4>æ­£è§£ã¨è§£èª¬</h4>
                        <p id="correct-answer"></p>
                        <p id="explanation"></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentProblem = 0;
        let correctAnswers = 0;
        let totalProblems = 0;
        let selectedTile = null;

        const problems = [
            {
                hand: [
                    {tile: '1m', type: 'man'}, {tile: '1m', type: 'man'}, {tile: '2m', type: 'man'},
                    {tile: '6m', type: 'man'}, {tile: '8m', type: 'man'}, 
                    {tile: '4p', type: 'pin'}, {tile: '5p', type: 'pin'}, {tile: '8p', type: 'pin'}, {tile: '9p', type: 'pin'},
                    {tile: '1s', type: 'sou'}, {tile: '3s', type: 'sou'}, {tile: '3s', type: 'sou'},
                    {tile: '5s', type: 'sou'}, {tile: '6s', type: 'sou'}
                ],
                context: "ãƒ‰ãƒ©: 5s",
                correctAnswer: '9p',
                explanation: "9pã¯å­¤ç«‹ã—ãŸç«¯ç‰Œã§æ´»ç”¨ã—ã«ããã€ä»–ã®éƒ¨åˆ†ã®æ–¹ãŒç™ºå±•æ€§ãŒã‚ã‚Šã¾ã™ã€‚è¬å­ã¯å¯¾å­ã¨æ­å­ãŒã‚ã‚Šã€ç­’å­ã¯45ã®æ­å­ã€ç´¢å­ã¯ãƒ‰ãƒ©ã®3så¯¾å­ã¨è‰¯ã„å½¢ãŒã‚ã‚Šã¾ã™ã€‚"
            },
            {
                hand: [
                    {tile: '1m', type: 'man'}, {tile: '2m', type: 'man'}, {tile: '3m', type: 'man'},
                    {tile: '6m', type: 'man'}, {tile: '7m', type: 'man'}, {tile: '8m', type: 'man'},
                    {tile: '3p', type: 'pin'}, {tile: '3p', type: 'pin'}, {tile: '4p', type: 'pin'},
                    {tile: '3s', type: 'sou'}, {tile: '3s', type: 'sou'}, {tile: '4s', type: 'sou'},
                    {tile: '7s', type: 'sou'}, {tile: '8s', type: 'sou'}
                ],
                context: "è´ç‰Œã¾ã§1æšã€ãƒ‰ãƒ©: 4p",
                correctAnswer: '4p',
                explanation: "4pã‚’åˆ‡ã‚‹ã“ã¨ã§3pã®æš—åˆ»ã‚’ç¶­æŒã—ã€3sã®å¯¾å­ã‹ã‚‰ã®ç™ºå±•ã‚’æœŸå¾…ã§ãã¾ã™ã€‚78sã®æ­å­ã‚‚æ®‹ã‚Šã€ç·åˆçš„ãªå¾…ã¡ãŒè‰¯ããªã‚Šã¾ã™ã€‚"
            },
            {
                hand: [
                    {tile: '1m', type: 'man'}, {tile: '2m', type: 'man'}, {tile: '3m', type: 'man'},
                    {tile: '4m', type: 'man'}, {tile: '5m', type: 'man'}, {tile: '6m', type: 'man'},
                    {tile: '7m', type: 'man'}, {tile: '8m', type: 'man'}, {tile: '9m', type: 'man'},
                    {tile: '1p', type: 'pin'}, {tile: '1p', type: 'pin'}, {tile: '2p', type: 'pin'},
                    {tile: '3p', type: 'pin'}, {tile: 'ä¸­', type: 'honor'}
                ],
                context: "æ±1å±€ã€è¦ªç•ªã€ãƒ‰ãƒ©: 5s",
                correctAnswer: 'ä¸­',
                explanation: "ä¸­ã¯å­¤ç«‹ã—ãŸå­—ç‰Œã§ä½¿ã„é“ãŒã‚ã‚Šã¾ã›ã‚“ã€‚è¬å­ã¯ä¸€é€šã®å¯èƒ½æ€§ãŒã‚ã‚Šã€ç­’å­ã‚‚é¢å­å€™è£œã¨ã—ã¦ä¾¡å€¤ãŒã‚ã‚Šã¾ã™ã€‚"
            },
            {
                hand: [
                    {tile: '2m', type: 'man'}, {tile: '2m', type: 'man'}, {tile: '4m', type: 'man'},
                    {tile: '3p', type: 'pin'}, {tile: '3p', type: 'pin'}, {tile: '4p', type: 'pin'}, {tile: '7p', type: 'pin'}, {tile: '8p', type: 'pin'}, {tile: '9p', type: 'pin'},
                    {tile: '1s', type: 'sou'}, {tile: '1s', type: 'sou'}, {tile: '4s', type: 'sou'}, {tile: '6s', type: 'sou'}, {tile: '8s', type: 'sou'}
                ],
                context: "ãƒ‰ãƒ©: 9s",
                correctAnswer: '3p',
                explanation: "3pã®å¯¾å­ã‚’åˆ‡ã‚‹ã“ã¨ã§æ‰‹ç‰Œã®å½¢ã‚’æ•´ãˆã¾ã™ã€‚ç­’å­ã¯789ã®é †å­ãŒã‚ã‚Šã€2mã®å¯¾å­ã¨1sã®å¯¾å­ã‚’æ®‹ã™ã“ã¨ã§ç™ºå±•æ€§ã‚’ä¿ã¦ã¾ã™ã€‚"
            },
            {
                hand: [
                    {tile: '2m', type: 'man'}, {tile: '2m', type: 'man'}, {tile: '7m', type: 'man'}, {tile: '8m', type: 'man'}, {tile: '9m', type: 'man'},
                    {tile: '4p', type: 'pin'}, {tile: '4p', type: 'pin'}, {tile: '6p', type: 'pin'}, {tile: '6p', type: 'pin'}, {tile: '8p', type: 'pin'}, {tile: '8p', type: 'pin'},
                    {tile: '1s', type: 'sou'}, {tile: '2s', type: 'sou'}, {tile: '3s', type: 'sou'}
                ],
                context: "ãƒ‰ãƒ©: 8m",
                correctAnswer: '2m',
                explanation: "2mã®å¯¾å­ã‚’åˆ‡ã£ã¦æ‰‹ç‰Œã‚’æ•´ç†ã—ã¾ã™ã€‚ãƒ‰ãƒ©ã®8mã‚’å«ã‚€789ã®é †å­ã¨ã€ç­’å­ã®å¯¾å­2çµ„ã€ç´¢å­ã®123é †å­ã‚’æ´»ã‹ã™æ–¹é‡ã§ã™ã€‚"
            },
            {
                hand: [
                    {tile: '5m', type: 'man'}, {tile: '6m', type: 'man'}, {tile: '7m', type: 'man'}, {tile: '8m', type: 'man'}, {tile: '9m', type: 'man'},
                    {tile: '2p', type: 'pin'}, {tile: '3p', type: 'pin'}, {tile: '3p', type: 'pin'}, {tile: '4p', type: 'pin'},
                    {tile: '3s', type: 'sou'}, {tile: '4s', type: 'sou'}, {tile: '5s', type: 'sou'}, {tile: '5s', type: 'sou'}, {tile: '6s', type: 'sou'}
                ],
                context: "ãƒ‰ãƒ©: 8m",
                correctAnswer: '3p',
                explanation: "3pã®å¯¾å­ã‚’åˆ‡ã‚‹ã“ã¨ã§24pã®æ­å­ã‚’æ®‹ã—ã€ã‚ˆã‚Šè‰¯ã„å½¢ã«å‘ã‹ã„ã¾ã™ã€‚è¬å­ã®é †å­ã¨ç´¢å­ã®è‰¯å½¢ãŒã‚ã‚‹ãŸã‚ã€ç­’å­éƒ¨åˆ†ã‚’æ•´ç†ã—ã¾ã™ã€‚"
            },
            {
                hand: [
                    {tile: '2m', type: 'man'}, {tile: '3m', type: 'man'}, {tile: '4m', type: 'man'},
                    {tile: '5m', type: 'man'}, {tile: '6m', type: 'man'}, {tile: '7m', type: 'man'},
                    {tile: '2p', type: 'pin'}, {tile: '3p', type: 'pin'}, {tile: '4p', type: 'pin'},
                    {tile: '6s', type: 'sou'}, {tile: '7s', type: 'sou'}, {tile: '8s', type: 'sou'},
                    {tile: 'æ±', type: 'honor'}, {tile: 'æ±', type: 'honor'}
                ],
                context: "æ±1å±€ã€è¦ªç•ªã€ãƒ‰ãƒ©: 1m",
                correctAnswer: 'æ±',
                explanation: "æ±ã®å¯¾å­ã¯ä¾¡å€¤ãŒä½ãã€ä»–ã®éƒ¨åˆ†ãŒå®Œæˆã—ã¦ã„ã‚‹ãŸã‚æ±ã‚’åˆ‡ã£ã¦è´ç‰Œã‚’ç‹™ã„ã¾ã™ã€‚"
            },
            {
                hand: [
                    {tile: '1m', type: 'man'}, {tile: '1m', type: 'man'}, {tile: '2m', type: 'man'}, {tile: '6m', type: 'man'}, {tile: '8m', type: 'man'},
                    {tile: '5p', type: 'pin'}, {tile: '6p', type: 'pin'}, {tile: '6p', type: 'pin'}, {tile: '8p', type: 'pin'},
                    {tile: '1s', type: 'sou'}, {tile: '3s', type: 'sou'}, {tile: '3s', type: 'sou'}, {tile: '5s', type: 'sou'}, {tile: '6s', type: 'sou'}
                ],
                context: "ãƒ‰ãƒ©: ä¸­",
                correctAnswer: '8p',
                explanation: "8pã¯å­¤ç«‹ã—ãŸä¸­å¼µç‰Œã§æ´»ç”¨ãŒå›°é›£ã§ã™ã€‚1mã®å¯¾å­ã€6pã®å¯¾å­ã€3sã®å¯¾å­ãŒã‚ã‚Šã€56pã®æ­å­ã¨56sã®æ­å­ã‚’æ®‹ã—ã¦ç™ºå±•ã‚’ç‹™ã„ã¾ã™ã€‚"
            },
            {
                hand: [
                    {tile: '1m', type: 'man'}, {tile: '9m', type: 'man'}, 
                    {tile: '2p', type: 'pin'}, {tile: '3p', type: 'pin'}, {tile: '4p', type: 'pin'},
                    {tile: '5p', type: 'pin'}, {tile: '6p', type: 'pin'}, {tile: '7p', type: 'pin'},
                    {tile: '3s', type: 'sou'}, {tile: '4s', type: 'sou'}, {tile: '5s', type: 'sou'},
                    {tile: 'ç™½', type: 'honor'}, {tile: 'ç™½', type: 'honor'}, {tile: 'ç™½', type: 'honor'}
                ],
                context: "æ±2å±€ã€å­ç•ªã€ãƒ‰ãƒ©: 8p",
                correctAnswer: '1m',
                explanation: "1mã¯å­¤ç«‹ã—ãŸç«¯ç‰Œã§æœ€ã‚‚ä½¿ã„é“ãŒã‚ã‚Šã¾ã›ã‚“ã€‚9mã‚‚åŒæ§˜ã§ã™ãŒã€ã©ã¡ã‚‰ã‚’åˆ‡ã£ã¦ã‚‚å¤§å·®ã‚ã‚Šã¾ã›ã‚“ã€‚"
            }
        ];

        function displayProblem() {
            const problem = problems[currentProblem];
            document.getElementById('problem-title').textContent = `å•é¡Œ ${currentProblem + 1}`;
            document.getElementById('problem-context').textContent = problem.context;
            
            const handContainer = document.getElementById('hand');
            handContainer.innerHTML = '';
            
            problem.hand.forEach((tileData, index) => {
                const tile = document.createElement('div');
                tile.className = `tile ${tileData.type} tile-${tileData.tile}`;
                tile.onclick = () => selectTile(tile, tileData.tile);
                handContainer.appendChild(tile);
            });

            document.getElementById('answer').classList.remove('show');
            selectedTile = null;
        }

        function selectTile(element, tile) {
            document.querySelectorAll('.tile').forEach(t => t.classList.remove('selected'));
            element.classList.add('selected');
            selectedTile = tile;
        }

        function showAnswer() {
            const problem = problems[currentProblem];
            document.getElementById('correct-answer').textContent = `æ­£è§£: ${problem.correctAnswer}`;
            document.getElementById('explanation').textContent = problem.explanation;
            document.getElementById('answer').classList.add('show');
            
            const resultDisplay = document.getElementById('result-display');
            
            totalProblems++;
            if (selectedTile === problem.correctAnswer) {
                correctAnswers++;
                resultDisplay.innerHTML = '<span class="correct-mark">â­•</span>';
            } else {
                resultDisplay.innerHTML = '<span class="incorrect-mark">âŒ</span>';
            }
            
            updateScore();
        }

        function nextProblem() {
            currentProblem++;
            if (currentProblem >= problems.length) {
                showFinalResult();
            } else {
                document.getElementById('result-display').innerHTML = '';
                displayProblem();
            }
        }

        function updateScore() {
            // ã‚¹ã‚³ã‚¢è¡¨ç¤ºã¯æœ€çµ‚çµæœã§ã®ã¿è¡Œã†
        }

        function startGame() {
            document.getElementById('title-screen').style.display = 'none';
            document.getElementById('game-screen').style.display = 'block';
            document.getElementById('result-screen').style.display = 'none';
            displayProblem();
        }

        function showFinalResult() {
            document.getElementById('game-screen').style.display = 'none';
            document.getElementById('result-screen').style.display = 'block';
            
            document.getElementById('final-score').textContent = `${correctAnswers} / ${problems.length}`;
            
            let emoji, message;
            const percentage = (correctAnswers / problems.length) * 100;
            
            if (percentage === 100) {
                emoji = 'ğŸ†';
                message = 'å®Œç’§ã§ã™ï¼éº»é›€ãƒã‚¹ã‚¿ãƒ¼ã§ã™ã­ï¼';
            } else if (percentage >= 80) {
                emoji = 'ğŸ‰';
                message = 'ç´ æ™´ã‚‰ã—ã„æˆç¸¾ã§ã™ï¼ã¨ã¦ã‚‚ä¸Šæ‰‹ã§ã™ã­ï¼';
            } else if (percentage >= 60) {
                emoji = 'ğŸ‘';
                message = 'è‰¯ã„çµæœã§ã™ï¼ã‚‚ã†å°‘ã—ã§ä¸Šç´šè€…ã§ã™ï¼';
            } else if (percentage >= 40) {
                emoji = 'ğŸ˜Š';
                message = 'ã¾ãšã¾ãšã®çµæœã§ã™ï¼ç·´ç¿’ã‚’ç¶šã‘ã¾ã—ã‚‡ã†ï¼';
            } else {
                emoji = 'ğŸ’ª';
                message = 'é ‘å¼µã‚Šã¾ã—ãŸï¼æ¬¡ã¯ã‚‚ã£ã¨è‰¯ã„çµæœã‚’ç›®æŒ‡ã—ã¾ã—ã‚‡ã†ï¼';
            }
            
            document.getElementById('result-emoji').textContent = emoji;
            document.getElementById('result-message').textContent = message;
        }

        function restartGame() {
            currentProblem = 0;
            correctAnswers = 0;
            totalProblems = 0;
            selectedTile = null;
            
            document.getElementById('result-screen').style.display = 'none';
            document.getElementById('game-screen').style.display = 'block';
            
            displayProblem();
        }

        function backToTitle() {
            currentProblem = 0;
            correctAnswers = 0;
            totalProblems = 0;
            selectedTile = null;
            
            document.getElementById('result-screen').style.display = 'none';
            document.getElementById('title-screen').style.display = 'block';
        }
    </script>
</body>
</html>
